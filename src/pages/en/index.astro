---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import I18nProvider from '../../components/I18nProvider.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getLangFromUrl, getTranslation } from '../../utils/i18n';
import i18next from 'i18next';

// Initialize i18next if not already initialized
if (!i18next.isInitialized) {
  await i18next.init({
    lng: 'en',
    fallbackLng: 'ko',
    resources: {
      ko: {
        common: await import('../../../public/locales/ko/common.json')
      },
      en: {
        common: await import('../../../public/locales/en/common.json')
      }
    }
  });
}

const lang = getLangFromUrl(Astro.url);
const t = getTranslation(lang);
---

<!doctype html>
<html lang={lang}>
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<I18nProvider>
			<Header />
			<main id="main-content" class="min-h-screen">
				<section class="hero py-20 text-center">
					<div class="max-w-4xl mx-auto">
						<h1 class="text-6xl font-bold mb-6 bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent">
							Jay Lee
						</h1>
						<p class="text-2xl text-gray-600 dark:text-gray-300 mb-8">
							{t('hero.role')}
						</p>
						<p class="text-lg text-gray-600 dark:text-gray-400 mb-12 max-w-2xl mx-auto">
							{t('hero.greeting')}
						</p>
						
						<div class="flex flex-wrap justify-center gap-4 mb-16">
							<a 
								href="/en/blog" 
								class="px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-semibold"
							>
								{t('common.viewBlog')}
							</a>
							<a 
								href="/en/about" 
								class="px-8 py-3 border-2 border-primary-600 text-primary-600 dark:text-primary-400 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors font-semibold"
							>
								{t('navigation.about')}
							</a>
						</div>
					</div>
				</section>

				<section class="featured-posts py-16 bg-gray-50 dark:bg-gray-800/50">
					<div class="max-w-6xl mx-auto px-4">
						<h2 class="text-3xl font-bold text-center mb-12">{t('home.recentPosts')}</h2>
						<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
							<!-- Featured posts will be populated here -->
							<div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700">
								<h3 class="text-xl font-semibold mb-3">DevContainer MCP Bootstrapper</h3>
								<p class="text-gray-600 dark:text-gray-400 mb-4">
									Introducing how to easily set up MCP servers in container environments.
								</p>
								<a href="/en/blog/techsavvy/container/2025-06-25-devcontainer-mcp-bootstrapper" class="text-primary-600 dark:text-primary-400 font-medium hover:underline">
									{t('common.readMore')} ‚Üí
								</a>
							</div>
							
							<div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700">
								<h3 class="text-xl font-semibold mb-3">Linux Capabilities and Build Systems</h3>
								<p class="text-gray-600 dark:text-gray-400 mb-4">
									How to build efficient build environments while enhancing security in Linux.
								</p>
								<a href="#" class="text-primary-600 dark:text-primary-400 font-medium hover:underline">
									{t('common.readMore')} ‚Üí
								</a>
							</div>

							<div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700">
								<h3 class="text-xl font-semibold mb-3">{t('home.morePosts')}</h3>
								<p class="text-gray-600 dark:text-gray-400 mb-4">
									{t('home.morePostsDesc')}
								</p>
								<a href="/en/blog" class="text-primary-600 dark:text-primary-400 font-medium hover:underline">
									{t('common.viewAll')} ‚Üí
								</a>
							</div>
						</div>
					</div>
				</section>

				<section class="skills py-16">
					<div class="max-w-4xl mx-auto text-center">
						<h2 class="text-3xl font-bold mb-12">{t('home.skills')}</h2>
						<div class="grid grid-cols-2 md:grid-cols-4 gap-6">
							<div class="p-4">
								<div class="text-4xl mb-2">üöÄ</div>
								<h3 class="font-semibold mb-2">{t('home.skillCategories.frontend')}</h3>
								<p class="text-sm text-gray-600 dark:text-gray-400">React, Vue, Astro</p>
							</div>
							<div class="p-4">
								<div class="text-4xl mb-2">‚ö°</div>
								<h3 class="font-semibold mb-2">{t('home.skillCategories.backend')}</h3>
								<p class="text-sm text-gray-600 dark:text-gray-400">Node.js, Python, Go</p>
							</div>
							<div class="p-4">
								<div class="text-4xl mb-2">üê≥</div>
								<h3 class="font-semibold mb-2">{t('home.skillCategories.devops')}</h3>
								<p class="text-sm text-gray-600 dark:text-gray-400">Docker, Kubernetes</p>
							</div>
							<div class="p-4">
								<div class="text-4xl mb-2">‚òÅÔ∏è</div>
								<h3 class="font-semibold mb-2">{t('home.skillCategories.cloud')}</h3>
								<p class="text-sm text-gray-600 dark:text-gray-400">AWS, GCP</p>
							</div>
						</div>
					</div>
				</section>
			</main>
			<Footer />
		</I18nProvider>
	</body>
</html>