---
title: "Bash: ë””ë ‰í† ë¦¬ ì¡´ì¬ ì—¬ë¶€ í™•ì¸í•˜ëŠ” ë°©ë²•"
author: "Jay Lee"
pubDate: "2020-11-17 00:00:01"
categories: ["TechSavvy", "Bash"]
tags: ["TechSavvy", "ProgrammingLanguage", "Bash"]
---

## ë¬¸ì œ

ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•˜ë‚˜ìš”? Bashì—ì„œ ì œëŒ€ë¡œ í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤!

## ê¸°ë³¸ ë””ë ‰í† ë¦¬ í™•ì¸

```bash
#!/bin/bash

test_dir_exist(){
    set -e 
    if [ -e "/home/jayleekr/workspace/00_codes/05_info_archive" ]; then
        echo "DIR Exist"
        exit 1
    fi
}

test_fail(){
    echo "test_fail"
}

test_dir_exist
```

ì‹¤í–‰ ê²°ê³¼:
```bash
$ ./directory_ex.sh
DIR Exist
```

## ë” ë‚˜ì€ ì ‘ê·¼ ë°©ë²•

### 1. ë””ë ‰í† ë¦¬ ì „ìš© í™•ì¸ì„ ìœ„í•œ -d ì‚¬ìš©
```bash
#!/bin/bash

check_directory() {
    local dir_path="$1"
    
    if [ -d "$dir_path" ]; then
        echo "âœ… ë””ë ‰í† ë¦¬ '$dir_path' ì¡´ì¬í•¨"
        return 0
    else
        echo "âŒ ë””ë ‰í† ë¦¬ '$dir_path' ì¡´ì¬í•˜ì§€ ì•ŠìŒ"
        return 1
    fi
}

# ì‚¬ìš©ë²•
check_directory "/home/user/workspace"
```

### 2. ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±í•˜ê¸°
```bash
#!/bin/bash

ensure_directory() {
    local dir_path="$1"
    
    if [ ! -d "$dir_path" ]; then
        echo "ë””ë ‰í† ë¦¬ ìƒì„± ì¤‘: $dir_path"
        mkdir -p "$dir_path"
    else
        echo "ë””ë ‰í† ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: $dir_path"
    fi
}

# ì‚¬ìš©ë²•
ensure_directory "/tmp/my_project/logs"
```

### 3. ì—¬ëŸ¬ ë””ë ‰í† ë¦¬ í™•ì¸í•˜ê¸°
```bash
#!/bin/bash

check_multiple_dirs() {
    local dirs=("$@")
    local all_exist=true
    
    for dir in "${dirs[@]}"; do
        if [ ! -d "$dir" ]; then
            echo "âŒ ì—†ìŒ: $dir"
            all_exist=false
        else
            echo "âœ… ë°œê²¬: $dir"
        fi
    done
    
    if [ "$all_exist" = true ]; then
        echo "ğŸ‰ ëª¨ë“  ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•©ë‹ˆë‹¤!"
        return 0
    else
        echo "ğŸ’¥ ì¼ë¶€ ë””ë ‰í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤!"
        return 1
    fi
}

# ì‚¬ìš©ë²•
check_multiple_dirs "/tmp" "/home" "/var/log" "/nonexistent"
```

## ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ì—°ì‚°ì

íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤:

```bash
# -e: ì¡´ì¬í•¨ (íŒŒì¼ ë˜ëŠ” ë””ë ‰í† ë¦¬)
[ -e "/path" ] && echo "/pathì— ë¬´ì–¸ê°€ ì¡´ì¬í•¨"

# -f: ì¼ë°˜ íŒŒì¼ ì¡´ì¬
[ -f "/path/file.txt" ] && echo "íŒŒì¼ ì¡´ì¬í•¨"

# -d: ë””ë ‰í† ë¦¬ ì¡´ì¬
[ -d "/path/dir" ] && echo "ë””ë ‰í† ë¦¬ ì¡´ì¬í•¨"

# -r: ì½ê¸° ê°€ëŠ¥
[ -r "/path" ] && echo "ì½ê¸° ê°€ëŠ¥"

# -w: ì“°ê¸° ê°€ëŠ¥
[ -w "/path" ] && echo "ì“°ê¸° ê°€ëŠ¥"

# -x: ì‹¤í–‰ ê°€ëŠ¥
[ -x "/path" ] && echo "ì‹¤í–‰ ê°€ëŠ¥"
```

## ì‹¤ìš©ì ì¸ ì˜ˆì œ

### 1. ë°±ì—… ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash

BACKUP_DIR="/backup/$(date +%Y%m%d)"

if [ ! -d "$BACKUP_DIR" ]; then
    echo "ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„± ì¤‘: $BACKUP_DIR"
    mkdir -p "$BACKUP_DIR"
fi

echo "ë°±ì—… ìœ„ì¹˜: $BACKUP_DIR"
# ì—¬ê¸°ì— ë°±ì—… ëª…ë ¹ì–´ ì¶”ê°€...
```

### 2. í”„ë¡œì íŠ¸ ì„¤ì •
```bash
#!/bin/bash

setup_project() {
    local project_name="$1"
    local project_dirs=("$project_name/src" "$project_name/tests" "$project_name/docs")
    
    for dir in "${project_dirs[@]}"; do
        if [ ! -d "$dir" ]; then
            echo "ìƒì„± ì¤‘: $dir"
            mkdir -p "$dir"
        fi
    done
    
    echo "í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„± ì™„ë£Œ: $project_name"
}

# ì‚¬ìš©ë²•
setup_project "my_awesome_app"
```

### 3. ë¡œê·¸ ìˆœí™˜ í™•ì¸
```bash
#!/bin/bash

LOG_DIR="/var/log/myapp"
ARCHIVE_DIR="/var/log/myapp/archive"

if [ -d "$LOG_DIR" ]; then
    echo "ë¡œê·¸ ë””ë ‰í† ë¦¬ ì¡´ì¬í•¨"
    
    # í•„ìš”ì‹œ ì•„ì¹´ì´ë¸Œ ë””ë ‰í† ë¦¬ ìƒì„±
    [ ! -d "$ARCHIVE_DIR" ] && mkdir -p "$ARCHIVE_DIR"
    
    # ë¡œê·¸ ìˆœí™˜
    find "$LOG_DIR" -name "*.log" -mtime +7 -exec mv {} "$ARCHIVE_DIR" \;
else
    echo "ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: $LOG_DIR"
    exit 1
fi
```

## í”„ë¡œ íŒ

1. **í•­ìƒ ë³€ìˆ˜ë¥¼ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°**: `[ -d "$dir" ]` (O), `[ -d $dir ]` (X)
2. **ë””ë ‰í† ë¦¬ì—ëŠ” -d ì‚¬ìš©**: -eë³´ë‹¤ ë” êµ¬ì²´ì 
3. **ê²½ë¡œì˜ ê³µë°± ì²˜ë¦¬**: ë”°ì˜´í‘œë¡œ ê³µë°±ìœ¼ë¡œë¶€í„° ë³´í˜¸
4. **ì¢…ë£Œ ì½”ë“œê°€ ì¤‘ìš”**: ìŠ¤í¬ë¦½íŒ…ì„ ìœ„í•´ ì˜ë¯¸ ìˆëŠ” ì¢…ë£Œ ì½”ë“œ ë°˜í™˜
5. **ìƒìœ„ ë””ë ‰í† ë¦¬ ìƒì„±**: `mkdir -p`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ì²©ëœ ë””ë ‰í† ë¦¬ ìƒì„±

## í”í•œ ì‹¤ìˆ˜

```bash
# âŒ ì´ë ‡ê²Œ í•˜ì§€ ë§ˆì„¸ìš”
if [ -d $HOME/my dir ]; then  # ê³µë°±ìœ¼ë¡œ ì¸í•´ ì˜¤ë¥˜ ë°œìƒ!

# âœ… ëŒ€ì‹  ì´ë ‡ê²Œ í•˜ì„¸ìš”
if [ -d "$HOME/my dir" ]; then  # ì˜¬ë°”ë¥´ê²Œ ë”°ì˜´í‘œ ì²˜ë¦¬

# âŒ ì´ë ‡ê²Œ í•˜ì§€ ë§ˆì„¸ìš”
if [ -e "$dir" ]; then  # íŒŒì¼ì¼ ìˆ˜ë„ ìˆìŒ!

# âœ… ë””ë ‰í† ë¦¬ í™•ì¸ì€ ì´ë ‡ê²Œ
if [ -d "$dir" ]; then  # êµ¬ì²´ì ìœ¼ë¡œ ë””ë ‰í† ë¦¬ í™•ì¸
```

## ì°¸ê³ ìë£Œ

- ì¼ë°˜: [Bash Beginners Guide](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)
- í…ŒìŠ¤íŠ¸ ì—°ì‚°ì: `man test` ë˜ëŠ” `help test`

*ë””ë ‰í† ë¦¬ í™•ì¸ì€ ê¸°ë³¸ ì¤‘ì˜ ê¸°ë³¸ì…ë‹ˆë‹¤ - ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ê°€ í›¨ì”¬ ê²¬ê³ í•´ì§‘ë‹ˆë‹¤! ğŸš€*