---
import { getLangFromUrl, t } from '../../utils/i18n';

const lang = getLangFromUrl(Astro.url);

interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  showCTA?: boolean;
  ctaPrimary?: string;
  ctaSecondary?: string;
  ctaPrimaryHref?: string;
  ctaSecondaryHref?: string;
}

const {
  title = t("hero.title", lang),
  subtitle = t("hero.subtitle", lang),
  description = t("hero.description", lang),
  showCTA = true,
  ctaPrimary = t("navigation.about", lang),
  ctaSecondary = t("common.viewBlog", lang),
  ctaPrimaryHref = lang === 'en' ? '/en/about' : '/about',
  ctaSecondaryHref = lang === 'en' ? '/en/blog' : '/blog'
} = Astro.props;
---

<section class="relative py-20 sm:py-24 lg:py-32 overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 bg-gradient-to-br from-primary-50 via-white to-primary-100 dark:from-gray-900 dark:via-gray-900 dark:to-primary-900/20"></div>
  
  <!-- Decorative Elements -->
  <div class="absolute inset-0 overflow-hidden" aria-hidden="true">
    <!-- Top Right Gradient -->
    <div class="absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-200/40 to-primary-300/20 dark:from-primary-800/20 dark:to-primary-900/10 rounded-full blur-3xl"></div>
    
    <!-- Bottom Left Gradient -->
    <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-primary-100/50 to-primary-200/30 dark:from-primary-900/20 dark:to-primary-800/10 rounded-full blur-3xl"></div>
    
    <!-- Grid Pattern -->
    <svg class="absolute inset-0 w-full h-full opacity-30 dark:opacity-10" aria-hidden="true">
      <defs>
        <pattern id="hero-grid" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M0 32V0h32" fill="none" stroke="currentColor" stroke-width="0.5" class="text-primary-200 dark:text-primary-800"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#hero-grid)" />
    </svg>
  </div>
  
  <!-- Content -->
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <div class="max-w-4xl mx-auto">
      
      <!-- Badge -->
      <div class="mb-8">
        <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium border border-primary-200 dark:border-primary-800">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          <span>{lang === 'ko' ? '개발자 블로그' : 'Developer Blog'}</span>
        </div>
      </div>
      
      <!-- Main Title -->
      <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold tracking-tight mb-6">
        <span class="block bg-gradient-to-r from-gray-900 via-primary-800 to-primary-600 dark:from-white dark:via-primary-200 dark:to-primary-400 bg-clip-text text-transparent">
          {title}
        </span>
      </h1>
      
      <!-- Subtitle -->
      {subtitle && (
        <h2 class="text-xl sm:text-2xl lg:text-3xl text-gray-600 dark:text-gray-300 font-light mb-8 leading-relaxed">
          {subtitle}
        </h2>
      )}
      
      <!-- Description -->
      {description && (
        <p class="text-lg sm:text-xl text-gray-700 dark:text-gray-300 max-w-3xl mx-auto mb-10 leading-relaxed">
          {description}
        </p>
      )}
      
      <!-- CTA Buttons -->
      {showCTA && (
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
          <a 
            href={ctaPrimaryHref}
            class="group inline-flex items-center gap-2 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-all duration-200 transform hover:scale-105 hover:shadow-lg min-h-[56px] w-full sm:w-auto justify-center"
          >
            <span>{ctaPrimary}</span>
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
          
          <a 
            href={ctaSecondaryHref}
            class="group inline-flex items-center gap-2 px-8 py-4 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border-2 border-primary-200 dark:border-primary-800 hover:border-primary-300 dark:hover:border-primary-700 text-primary-700 dark:text-primary-300 font-semibold rounded-xl transition-all duration-200 min-h-[56px] w-full sm:w-auto justify-center"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
            <span>{ctaSecondary}</span>
          </a>
        </div>
      )}
      
      <!-- Stats/Features (Optional) -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-2xl mx-auto">
        <div class="text-center">
          <div class="text-2xl sm:text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2">
            10+
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            {lang === 'ko' ? '기술 포스트' : 'Tech Posts'}
          </div>
        </div>
        
        <div class="text-center">
          <div class="text-2xl sm:text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2">
            5+
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            {lang === 'ko' ? '개발 프로젝트' : 'Dev Projects'}
          </div>
        </div>
        
        <div class="text-center">
          <div class="text-2xl sm:text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2">
            24/7
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            {lang === 'ko' ? '학습 중' : 'Learning'}
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2">
    <div class="flex flex-col items-center gap-2 text-gray-400 dark:text-gray-600 animate-bounce">
      <span class="text-sm font-medium">
        {lang === 'ko' ? '스크롤' : 'Scroll'}
      </span>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
      </svg>
    </div>
  </div>
</section>

<style>
  /* Animation for the scroll indicator */
  @keyframes bounce {
    0%, 20%, 53%, 80%, 100% {
      transform: translate3d(0,0,0);
    }
    40%, 43% {
      transform: translate3d(0, -8px, 0);
    }
    70% {
      transform: translate3d(0, -4px, 0);
    }
    90% {
      transform: translate3d(0, -2px, 0);
    }
  }
  
  /* Ensure proper text rendering */
  h1, h2 {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Gradient text fallback */
  @supports not (background-clip: text) {
    .bg-clip-text {
      background: none;
      color: rgb(var(--color-primary-600));
    }
    
    .dark .bg-clip-text {
      color: rgb(var(--color-primary-400));
    }
  }
  
  /* Button hover effects */
  .group:hover svg {
    transform: translateX(4px);
  }
  
  /* Responsive font sizing */
  @media (max-width: 640px) {
    h1 {
      font-size: clamp(2rem, 8vw, 3rem);
      line-height: 1.1;
    }
    
    h2 {
      font-size: clamp(1.25rem, 5vw, 1.5rem);
      line-height: 1.3;
    }
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .animate-bounce {
      animation: none;
    }
    
    .group:hover svg {
      transform: none;
    }
    
    .transform:hover {
      transform: none;
    }
  }
</style>