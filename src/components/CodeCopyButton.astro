<!-- Code copy button - Auto-attaches to all code blocks -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('pre').forEach((pre) => {
      const code = pre.querySelector('code');
      if (!code) return;

      const button = document.createElement('button');
      button.className = 'copy-button';
      button.textContent = 'Copy';

      button.addEventListener('click', async () => {
        await navigator.clipboard.writeText(code.textContent || '');
        button.textContent = 'Copied!';
        setTimeout(() => button.textContent = 'Copy', 2000);
      });

      pre.style.position = 'relative';
      pre.appendChild(button);
    });
  });
</script>

<style is:global>
  .copy-button {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    padding: 0.25rem 0.5rem;
    font-size: var(--text-sm);
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 0.25rem;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s;
  }

  pre:hover .copy-button {
    opacity: 1;
  }

  .copy-button:hover {
    background: var(--code-bg);
  }
</style>
